{% macro pagination_controls(posts, postsPerPage, currentPage, baseUrl) %}
{% set totalPages = (posts.length / postsPerPage) | round(0, 'ceil') %}
{% if totalPages > 1 %}
<nav class="pagination-nav" aria-label="Pagination">
  <div class="pagination-controls">
    {% if currentPage > 1 %}
    <a href="{{ baseUrl }}{% if currentPage > 2 %}/page/{{ currentPage - 1 }}{% endif %}" class="pagination-link pagination-prev">
      <span class="pagination-arrow">←</span>
      <span class="pagination-text">Previous</span>
    </a>
    {% endif %}

    <div class="pagination-numbers">
      {% for pageNum in range(1, totalPages + 1) %}
        {% if pageNum == currentPage %}
        <span class="pagination-number pagination-current">{{ pageNum }}</span>
        {% else %}
        <a href="{{ baseUrl }}{% if pageNum > 1 %}/page/{{ pageNum }}{% endif %}" class="pagination-number pagination-link">{{ pageNum }}</a>
        {% endif %}
      {% endfor %}
    </div>

    {% if currentPage < totalPages %}
    <a href="{{ baseUrl }}/page/{{ currentPage + 1 }}" class="pagination-link pagination-next">
      <span class="pagination-text">Next</span>
      <span class="pagination-arrow">→</span>
    </a>
    {% endif %}
  </div>
  <div class="pagination-info">
    <span class="pagination-summary">
      Page {{ currentPage }} of {{ totalPages }}
      ({{ posts.length }} total posts)
    </span>
  </div>
</nav>
{% endif %}
{% endmacro %}

{% macro paginated_listing(posts, postsPerPage, currentPage, baseUrl, listItemTemplate) %}
{% set totalPages = (posts.length / postsPerPage) | round(0, 'ceil') %}
{% set startIndex = (currentPage - 1) * postsPerPage %}
{% set endIndex = [startIndex + postsPerPage, posts.length] | min %}
{% set paginatedPosts = posts.slice(startIndex, endIndex) %}

<div class="writings-listing">
  <ul class="writings-grid">
    {% for post in paginatedPosts %}
      {% include listItemTemplate %}
    {% endfor %}
  </ul>
  
  {{ pagination_controls(posts, postsPerPage, currentPage, baseUrl) }}
</div>
{% endmacro %}